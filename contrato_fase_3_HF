
# CONTRATO T√âCNICO ‚Äî FASE 3
TS4 Mod Analyzer ‚Äî v3.4.0 (Hugging Face Edition)

## Modelos de IA (Defini√ß√£o Final)

### Modelo Prim√°rio (default)
- **google/flan-t5-base**
- Uso:
  - Classifica√ß√£o simples
  - Matching plaus√≠vel
  - Valida√ß√£o sem√¢ntica leve
- Justificativa:
  - Instruction-tuned
  - Est√°vel no Hugging Face Inference API (free tier)
  - Baixa lat√™ncia
  - Compat√≠vel com Streamlit Cloud (CPU)
- Par√¢metros obrigat√≥rios:
  - temperature = 0
  - top_p = 1

### Modelo Secund√°rio (fallback √∫nico)
- **facebook/bart-large-mnli**
- Uso:
  - Classifica√ß√£o NLI
  - Avalia√ß√£o de correspond√™ncia quando o prim√°rio falhar
- Justificativa:
  - Especializado em classifica√ß√£o
  - Muito est√°vel no free tier
  - Mais confi√°vel que modelos 7B+ em ambiente serverless
- Restri√ß√µes:
  - Executado no m√°ximo uma vez por mod
  - Nunca em loop
- Par√¢metros obrigat√≥rios:
  - temperature = 0
  - top_p = 1

---

## 1. Princ√≠pios Inviol√°veis

1. Notion √© a base can√¥nica
2. A IA nunca escreve no Notion
3. A IA nunca decide
4. A IA s√≥ existe como fallback assistivo
5. A l√≥gica determin√≠stica sempre prevalece

---

## 2. Condi√ß√µes Estritas para Chamada da IA

A IA **s√≥ pode ser acionada** quando TODAS as condi√ß√µes forem verdadeiras:
- Nenhuma duplicata encontrada via:
  - URL
  - Filename normalizado
  - Slug confi√°vel
- E pelo menos um dos seguintes:
  - Slug classificado como lixo
  - Dom√≠nio bloqueado (Cloudflare / Patreon / acesso negado)

Caso contr√°rio:
üëâ IA N√ÉO √â CHAMADA

---

## 3. Contexto M√°ximo Permitido √† IA

- M√°ximo absoluto: **5 entradas do Notion**
- Cada entrada cont√©m APENAS:
  - Filename
  - URL

Nenhuma outra propriedade √© permitida.

---

## 4. Fun√ß√µes Permitidas da IA

A IA pode SOMENTE:
- Avaliar correspond√™ncia plaus√≠vel
- Classificar identidade como:
  - utiliz√°vel
  - lixo / n√£o confi√°vel

A IA NUNCA:
- Cria nomes
- Sugere criadores
- Normaliza dados
- Decide cria√ß√£o
- Decide prioridade
- Altera fluxo do app
- Escreve no Notion

---

## 5. Uso do Output da IA

O output da IA √© **sinal**, n√£o verdade.

Regras:
- match = false
  - UI exibe fallback hardcoded
  - Nenhuma a√ß√£o adicional ocorre
- match = true
  - Nome exibido como hyperlink
  - Nenhuma escrita autom√°tica acontece

A IA n√£o altera estado persistente.

---

## 6. Limites de Uso

- M√°ximo de chamadas por mod: **2**
- Sem retries autom√°ticos
- Sem chamadas em massa
- Sem depend√™ncia estrutural

---

## 7. Objetivo T√©cnico da Fase 3

- Reduzir falsos negativos
- Preservar controle humano
- Manter custo zero
- Garantir auditabilidade
- N√£o aumentar automa√ß√£o

---

## 8. Cl√°usula Final de Seguran√ßa

Em qualquer conflito entre:
- l√≥gica determin√≠stica
- output da IA

üëâ **a l√≥gica determin√≠stica sempre vence**.

---

Contrato congel√°vel para **v3.4.0**
Backend de IA: **Hugging Face**
Ambiente alvo: **Streamlit Cloud (100% online, custo zero)**
